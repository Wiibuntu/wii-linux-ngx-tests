--- drivers/media/platform/xilinx/xilinx-vipp.c
+++ drivers/media/platform/xilinx/xilinx-vipp.c
@@ -476,11 +476,14 @@ static int xvip_graph_dma_init(struct xvip_composite_device *xdev)
 
 	for_each_child_of_node(ports, port) {
 		ret = xvip_graph_dma_init_one(xdev, port);
-		if (ret < 0)
-			return ret;
+		if (ret) {
+			of_node_put(port);
+			break;
+		}
 	}
 
-	return 0;
+	of_node_put(ports);
+	return ret;
 }
 
 static void xvip_graph_cleanup(struct xvip_composite_device *xdev)
